(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,n,o){},15:function(e,n,o){},17:function(e,n,o){"use strict";o.r(n);var t=o(0),a=o.n(t),r=o(3),l=o.n(r),i=(o(14),o(4)),c=o.n(i);o(15),o(16);const s="https://stood-beneficial-withdrawal-sas.trycloudflare.com";var d=function(){const[e,n]=Object(t.useState)(0),[o,r]=Object(t.useState)(!1),[l,i]=Object(t.useState)(null),[d,p]=Object(t.useState)(null);Object(t.useEffect)(()=>{console.log("useEffect: Starting environment check."),console.log("useEffect: typeof window:",typeof window);let e=!1;if("undefined"!==typeof window&&(console.log("useEffect: window.Telegram:",window.Telegram),console.log("useEffect: window.Telegram.WebApp:",window.Telegram.WebApp),window.Telegram&&window.Telegram.WebApp?(console.log("useEffect: Checking window.Telegram.WebApp.initData:",window.Telegram.WebApp.initData),console.log("useEffect: Checking window.Telegram.WebApp.initDataUnsafe:",window.Telegram.WebApp.initDataUnsafe),window.Telegram.WebApp.initData&&window.Telegram.WebApp.initData.length>0&&window.Telegram.WebApp.initDataUnsafe&&window.Telegram.WebApp.initDataUnsafe.query_id?(console.log("useEffect: window.Telegram.WebApp.initDataUnsafe.query_id:",window.Telegram.WebApp.initDataUnsafe.query_id),e=!0):console.log("useEffect: initData is empty or query_id is missing.  NOT true Telegram environment.")):console.log("useEffect: window.Telegram or window.Telegram.WebApp is not defined.")),console.log("useEffect: isTelegramEnvironment (final value):",e),e){console.log("useEffect: Detected Telegram WebApp environment. Initializing...");const e=window.Telegram.WebApp;try{e.ready(),p(e.themeParams),e.expand(),e.enableClosingConfirmation(),e.MainButton.text="Test sending data",e.MainButton.show(),e.MainButton.onClick(()=>m()),r(!0),console.log("Mini App loaded and ready for keyboard button interaction")}catch(n){i("WebApp initialization error: ".concat(n.message)),console.error("WebApp error:",n)}}else console.log("useEffect: Did NOT detect Telegram WebApp environment."),i("Not running in Telegram WebApp environment"),console.warn("Telegram WebApp not available");return()=>{var e,n;(null===(e=window.Telegram)||void 0===e?void 0:null===(n=e.WebApp)||void 0===n?void 0:n.MainButton)&&(window.Telegram.WebApp.MainButton.offClick(m),window.Telegram.WebApp.MainButton.hide())}},[]);const m=()=>{if(console.log("handleSendData called"),"undefined"!==typeof window&&window.Telegram&&window.Telegram.WebApp){const n=window.Telegram.WebApp,o={message:"Hello from React Mini App!",timestamp:(new Date).toISOString(),userAction:"button_click",event:"main_button_click",init_data:n.initData,version:n.version,platform:n.platform};try{console.log("Attempting to send data via fetch to backend:",o),fetch("".concat(s,"/api/webapp-data"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(e=>{if(!e.ok)throw new Error("HTTP error! status: ".concat(e.status));return e.json()}).then(e=>{console.log("Data sent successfully to backend:",e),n.showAlert(e.message||"Data sent to server!")}).catch(e=>{console.error("Error sending data to backend:",e),i("Send error: ".concat(e.message)),n.showAlert("Error: ".concat(e.message))})}catch(e){console.error("Error preparing data for backend:",e),i("Client-side send error: ".concat(e.message)),n.showAlert("Client-side error: ".concat(e.message))}}else console.error("Telegram WebApp not available"),i("Telegram WebApp not available")},g=e=>{if("undefined"!==typeof window&&window.Telegram&&window.Telegram.WebApp){const o=window.Telegram.WebApp,t={event:"count_update",count:e,timestamp:(new Date).toISOString(),init_data:o.initData,version:o.version,platform:o.platform};try{console.log("Sending count update via fetch to backend:",t),fetch("".concat(s,"/api/webapp-data"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>{if(!e.ok)throw new Error("HTTP error! status: ".concat(e.status));return e.json()}).then(e=>{console.log("Count update sent successfully to backend:",e)}).catch(e=>{console.error("Error sending count update to backend:",e)})}catch(n){console.error("Error preparing count update for backend:",n)}}},u="undefined"!==typeof window&&window.Telegram&&window.Telegram.WebApp?window.Telegram.WebApp:null,f={backgroundColor:(null===d||void 0===d?void 0:d.bg_color)||"#ffffff",color:(null===d||void 0===d?void 0:d.text_color)||"#000000",minHeight:"100vh",padding:"20px"};return a.a.createElement("div",{className:"App",style:f},a.a.createElement("header",{className:"App-header"},a.a.createElement("img",{src:c.a,className:"App-logo",alt:"logo"}),a.a.createElement("p",null,"Hello World! This is a Telegram Mini App."),l&&a.a.createElement("p",{style:{color:(null===d||void 0===d?void 0:d.destructive_text_color)||"red"}},"Error: ",l),!o&&!l&&a.a.createElement("p",null,"Initializing Telegram WebApp..."),o&&a.a.createElement("p",{style:{color:(null===d||void 0===d?void 0:d.link_color)||"green"}},"\u2705 WebApp Ready!"),a.a.createElement("div",null,a.a.createElement("p",null,"Count: ",e),a.a.createElement("button",{onClick:()=>{const o=e+1;n(o),g(o)},style:{backgroundColor:(null===d||void 0===d?void 0:d.secondary_bg_color)||"#f0f0f0",color:(null===d||void 0===d?void 0:d.text_color)||"#000000",border:"1px solid ".concat((null===d||void 0===d?void 0:d.hint_color)||"#ccc"),padding:"8px 16px",borderRadius:"6px",cursor:"pointer",margin:"5px"}},"Increment Count")),a.a.createElement("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:(null===d||void 0===d?void 0:d.section_bg_color)||"#e8f4fd",borderRadius:"8px",border:"1px solid ".concat((null===d||void 0===d?void 0:d.hint_color)||"#ccc")}},a.a.createElement("h4",{style:{margin:"0 0 10px 0",color:(null===d||void 0===d?void 0:d.accent_text_color)||"#0088cc"}},"\ud83c\udfaf Keyboard Button Mini App"),a.a.createElement("p",{style:{margin:"5px 0",fontSize:"14px"}},"\u2022 All buttons send data using ",a.a.createElement("code",null,"sendData()")),a.a.createElement("p",{style:{margin:"5px 0",fontSize:"14px"}},"\u2022 Count updates are sent automatically to bot"),a.a.createElement("p",{style:{margin:"5px 0",fontSize:"14px"}},"\u2022 Use the blue button at bottom to send manual data"),a.a.createElement("p",{style:{margin:"5px 0",fontSize:"14px"}},"\u2022 Check your bot logs to see data reception")),u&&a.a.createElement("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:(null===d||void 0===d?void 0:d.secondary_bg_color)||"#f5f5f5",borderRadius:"8px"}},a.a.createElement("h3",null,"WebApp Info:"),a.a.createElement("p",null,"Telegram WebApp Version: ",u.version),a.a.createElement("p",null,"Platform: ",u.platform),a.a.createElement("p",null,"Init Data Available: ",u.initData?"Yes":"No"),a.a.createElement("p",null,"Theme: ",u.colorScheme)),a.a.createElement("a",{className:"App-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer",style:{color:(null===d||void 0===d?void 0:d.link_color)||"#0088cc"}},"Learn React")))};var p=e=>{e&&e instanceof Function&&o.e(3).then(o.bind(null,19)).then(n=>{let{getCLS:o,getFID:t,getFCP:a,getLCP:r,getTTFB:l}=n;o(e),t(e),a(e),r(e),l(e)})};l.a.createRoot(document.getElementById("root")).render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(d,null))),p()},4:function(e,n,o){e.exports=o.p+"static/media/logo.06e73328.svg"},5:function(e,n,o){e.exports=o(17)}},[[5,1,2]]]);
//# sourceMappingURL=main.81ad40ae.chunk.js.map